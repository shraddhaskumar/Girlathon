<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Registration</title>
    <link rel="stylesheet" href="user.css">
</head>
<body>

<div class="container">
    <h2>User Registration</h2>
    <form id="userForm" action="registration_process.php" method="post">
        <div class="input-group">
            <label for="fullname">Full Name</label>
            <input type="text" id="fullname" name="fullname" required>
        </div>
        <div class="input-group">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" required>
        </div>
        <div class="input-group">
            <label for="password">Password</label>
            <input type="password" id="password" name="password" required>
        </div>
        <div class="input-group">
            <label for="confirm_password">Confirm Password</label>
            <input type="password" id="confirm_password" name="confirm_password" required>
        </div>
        <div class="input-group">
            <label for="birthdate">Date of Birth</label>
            <input type="date" id="birthdate" name="birthdate">
        </div>
        <div class="input-group">
            <label for="needs">Select Your Need</label>
            <select id="needs" name="needs">
                <option value="pregnancy">Pregnancy</option>
                <option value="menstruation">Menstruation</option>
            </select>
        </div>
        <div class="input-group">
            <label for="address">Address:</label>
            <textarea id="address" name="address" rows="4"></textarea>
        </div>
        <button type="submit" id="sub">Register</button>
    </form>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";
    import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCjjWrLZ-nGoLn-ywK3LEQn5AYKXbrk2wo",
        authDomain: "girlathon-baf1c.firebaseapp.com",
        projectId: "girlathon-baf1c",
        storageBucket: "girlathon-baf1c.appspot.com",
        messagingSenderId: "712510120283",
        appId: "1:712510120283:web:34ba7c83764bde3ebdba7e"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    document.getElementById("userForm").addEventListener('submit', function(e) {
        e.preventDefault();

        const fullname = document.getElementById("fullname").value;
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value; // Ensure you're handling passwords securely!
        const birthdate = document.getElementById("birthdate").value;
        const needs = document.getElementById("needs").value;
        const address = document.getElementById("address").value;

        set(ref(db, 'user/' + fullname), {
            email: email,
            password: password, // Consider security implications
            birthdate: birthdate,
            needs: needs,
            address: address
        }).then(() => {
            alert("Registration Successful!");
            // Optionally, clear the form or redirect the user
        }).catch((error) => {
            console.error("Error writing document: ", error);
        });
    });
</script>
</body>
</html>
